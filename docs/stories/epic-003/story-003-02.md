# Story 003-02: Mirror objects along axis

**Epic:** EPIC-003 - Transformation and Manipulation Tools
**Status:** Not Started
**Estimate:** 5 points
**Assigned To:** Unassigned

---

## Description

As a pattern designer, I want to create mirrored copies of pattern pieces
so that I can quickly create left/right or top/bottom symmetrical pieces.

---

## Acceptance Criteria

- [ ] User can mirror objects horizontally (vertical axis)
- [ ] User can mirror objects vertically (horizontal axis)
- [ ] User can define custom mirror axis using two points or a line
- [ ] Mirrored copy is created as new object (original preserved)
- [ ] Mirrored objects can optionally maintain parametric link to original
- [ ] Mirror operation works on single objects or groups
- [ ] Mirror is undoable

---

## Technical Notes

**MirrorTool Implementation:**
```cpp
class MirrorObjectsCommand : public Command {
    std::vector<GeometryObject*> originalObjects;
    std::vector<GeometryObject*> mirroredObjects;
    Line mirrorAxis;
    bool linkParametrically;

    void execute() override {
        for (auto* obj : originalObjects) {
            GeometryObject* mirrored = obj->clone();
            mirrored->applyTransform(getMirrorMatrix());

            if (linkParametrically) {
                linkToOriginal(mirrored, obj);
            }

            scene->addObject(mirrored);
            mirroredObjects.push_back(mirrored);
        }
    }

    QTransform getMirrorMatrix() {
        // Reflection matrix across custom axis
        // 1. Translate so axis passes through origin
        // 2. Rotate so axis is aligned with X or Y axis
        // 3. Apply reflection (scale by -1 on one axis)
        // 4. Reverse rotation and translation
        ...
    }
};
```

**Mirror Axis Definition:**
- Default horizontal mirror: Use Y-axis at selection center
- Default vertical mirror: Use X-axis at selection center
- Custom axis: User clicks two points to define mirror line
- Use existing line: User selects a line object as mirror axis

**Parametric Linking:**
- Optional feature: Link mirrored object to original
- When original changes, mirrored copy updates automatically
- Implement using Observer pattern or parametric dependency

---

## Dependencies

- story-001-03: Object selection

---

## Definition of Done

- [ ] MirrorTool implemented
- [ ] Mirror command working (horizontal, vertical, custom axis)
- [ ] Mirrored copies created correctly
- [ ] Parametric linking optional feature working
- [ ] Undo/redo working
- [ ] Unit tests for mirror transformations
- [ ] Integration tests with UI
- [ ] Documentation updated
- [ ] Merged to main branch
