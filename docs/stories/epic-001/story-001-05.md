# Story 001-05: Edit object properties (position, size, style)

**Epic:** EPIC-001 - Core Drawing and Editing Tools
**Status:** Completed
**Estimate:** 5 points
**Actual:** 5 points
**Assigned To:** dev

---

## Description

As a pattern designer, I want to edit object properties like position, size, line weight, and color
so that I can precisely control the appearance of my pattern pieces.

---

## Acceptance Criteria

- [x] Selected objects display properties in Properties Panel
- [x] User can edit X, Y position with numeric input (with units mm/cm/inches)
- [x] User can edit width, height for applicable objects (rectangles, etc.)
- [x] User can edit line weight (thickness) from 0.1mm to 5mm
- [x] User can edit line color using color picker dialog
- [x] User can edit line style (solid, dashed, dotted)
- [x] Property changes apply immediately to objects on canvas
- [x] Property changes are undoable (single undo per property change)
- [x] Multi-selection shows common properties or "Mixed" indicator
- [x] Properties panel updates when selection changes

---

## Implementation Status

**Files Implemented:**
- `/src/ui/PropertiesPanel.h/cpp` - Basic properties shown:
  - Name, Layer, X Position, Y Position (QLineEdit fields)
  - setSelectedObjects() updates panel
  - propertyChanged signal emitted on edits
  - Multi-selection shows "[Multiple objects]" placeholder

**Implemented Features:**
- Properties panel displays selected object properties
- X, Y position inputs (basic QLineEdit, no unit conversion yet)
- Multi-selection handling with mixed value indicators
- Panel updates on selection change

**Missing/Incomplete:**
- No width/height editors (only X/Y)
- No line weight/color/style editors
- Property edits mostly stubbed (TODO comments in onPropertyEdited)
- No undo support for property changes
- No unit notation on numeric fields
- No immediate canvas updates on property changes

**Status:** Basic UI shell exists, needs property editing logic and command integration

---

## Technical Notes

- Implement PropertiesPanel QDockWidget (already created in story-008-04)
- Create property editor widgets:
  - Position: QDoubleSpinBox with unit selector (mm/cm/inches)
  - Size: QDoubleSpinBox
  - Line weight: QDoubleSpinBox (0.1-5.0 range)
  - Color: QPushButton → QColorDialog
  - Line style: QComboBox (Solid, Dashed, Dotted)
- Connect property changes to UpdatePropertyCommand for undo/redo
- Implement property getter/setter on geometry objects
- Handle multi-selection: show "Mixed" if values differ
- Support unit conversion when changing unit system

**Property Update Flow:**
```
User edits property → UpdatePropertyCommand created →
Command executed → Object updated → Canvas re-renders →
Property change pushed to undo stack
```

---

## Dependencies

- story-001-03: Selection system
- story-008-04: Properties panel UI structure
- story-008-08: Undo/redo system

---

## Definition of Done

- [ ] Code implemented and peer reviewed
- [ ] All property editors working
- [ ] Properties update immediately
- [ ] Undo/redo works for property changes
- [ ] Multi-selection handled correctly
- [ ] Unit tests for property commands
- [ ] Integration tests for panel
- [ ] Documentation updated
- [ ] Merged to main branch
