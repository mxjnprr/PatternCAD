# Story 007-05: Auto-save recovery on startup

**Epic:** EPIC-007 - File Operations and Interoperability
**Status:** Completed
**Estimate:** 5 points
**Assigned To:** Claude

---

## Description

As a pattern designer, when application crashes, I want to recover my work from auto-save so that I don't lose progress.

---

## Acceptance Criteria

- [ ] On application startup, system checks for auto-save files
- [ ] If recovery files found, recovery dialog appears automatically
- [ ] Recovery dialog shows: filename, timestamp, file size for each recovery file
- [ ] User can select which recovery file to restore
- [ ] User can choose to discard recovery files and start fresh
- [ ] Restored file opens as unsaved (requires Save As)
- [ ] Recovery files are kept until manually deleted or project saved

---

## Technical Notes

### Implementation Details

- Scan for .autosave files on startup
- Implement RecoveryDialog
- Display recovery options to user
- Load selected recovery file
- Cleanup or preserve recovery files based on user choice

### Architecture

The recovery system should:
1. On application start, scan for .autosave files
2. Match auto-save files to their original files
3. Present recovery dialog if auto-saves found
4. Allow user to preview file details (timestamp, size)
5. Load selected file if user chooses to recover
6. Mark file as unsaved (needs explicit save)

### Recovery Dialog Design

The dialog should show:
- Original filename
- Auto-save timestamp
- File size
- Optional: Preview of pattern (thumbnail if possible)
- Options: Recover, Discard, Cancel

### Cleanup Strategy

- If user recovers: keep auto-save until explicit save
- If user discards: delete auto-save files
- If user cancels: keep auto-save files for next startup

---

## Dependencies

- story-007-04 (Auto-save with background saving)

---

## Definition of Done

- [ ] Code implemented and follows project coding standards
- [ ] Unit tests written and passing
- [ ] Integration tests verify recovery functionality
- [ ] Manual testing completed on Linux and Windows
- [ ] Recovery dialog is user-friendly and clear
- [ ] File scanning works correctly
- [ ] Recovery doesn't corrupt files
- [ ] Cleanup logic works as expected
- [ ] Documentation updated (user guide)
- [ ] Code reviewed and approved
- [ ] Edge cases tested (multiple auto-saves, missing original file)
- [ ] UX verified with test users
