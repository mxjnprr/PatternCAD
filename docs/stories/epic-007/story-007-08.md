# Story 007-08: Import SVG files

**Epic:** EPIC-007 - File Operations and Interoperability
**Status:** Completed
**Estimate:** 13 points
**Assigned To:** Claude

---

## Description

As a pattern designer, I want to import patterns from SVG files so that I can use vector graphics created in design tools.

---

## Acceptance Criteria

- [ ] User can import SVG files via File → Import → SVG
- [ ] System supports SVG 1.1 and 2.0
- [ ] Supported elements: path, line, circle, ellipse, rect, polygon, polyline
- [ ] Import handles SVG transforms (translate, rotate, scale)
- [ ] Import respects SVG viewBox for proper scaling
- [ ] User can specify import scale if SVG lacks units
- [ ] Bezier curves and paths converted to editable curves
- [ ] Grouped objects imported as grouped or separate layers
- [ ] Import preserves stroke width and colors where applicable

---

## Technical Notes

### Implementation Details

- Use Qt SVG module for parsing
- Parse SVG path data to geometry
- Handle SVG transforms
- Map SVG elements to PatternCAD geometry
- Handle viewBox scaling
- Import stroke properties
- Implement SVGFormat class

### SVG Element Mapping

| SVG Element | PatternCAD Geometry |
|-------------|---------------------|
| `<line>` | Line |
| `<circle>` | Circle |
| `<ellipse>` | Ellipse or scaled Circle |
| `<rect>` | Rectangle |
| `<polygon>` | Polygon (closed polyline) |
| `<polyline>` | Polyline |
| `<path>` | Bezier curves, lines, arcs |

### Path Data Parsing

SVG path commands to handle:
- M/m (moveto)
- L/l (lineto)
- H/h (horizontal lineto)
- V/v (vertical lineto)
- C/c (cubic bezier)
- S/s (smooth cubic bezier)
- Q/q (quadratic bezier)
- T/t (smooth quadratic bezier)
- A/a (arc)
- Z/z (closepath)

### Transform Handling

Parse and apply SVG transforms:
- `translate(x, y)`
- `rotate(angle, cx, cy)`
- `scale(sx, sy)`
- `matrix(a, b, c, d, e, f)`
- Handle transform composition

### ViewBox and Units

- Parse viewBox attribute
- Calculate scale factor from viewBox to canvas
- Handle SVG units (px, mm, cm, in, pt, pc)
- Allow user override if units ambiguous

### Style Handling

Import relevant style properties:
- stroke-width → line weight
- stroke → line color
- fill → fill color (if applicable)
- Handle CSS styles and presentation attributes

---

## Dependencies

None

---

## Definition of Done

- [ ] Code implemented and follows project coding standards
- [ ] Unit tests written and passing for SVG parsing
- [ ] Integration tests verify import with sample SVG files
- [ ] Manual testing completed on Linux and Windows
- [ ] Tested with SVG files from Inkscape, Illustrator, web browsers
- [ ] All supported elements import correctly
- [ ] Path data parsing works for all commands
- [ ] Transforms applied correctly
- [ ] ViewBox scaling accurate
- [ ] Stroke properties preserved
- [ ] Documentation updated (user guide, supported formats)
- [ ] Code reviewed and approved
- [ ] Edge cases tested (complex paths, nested groups, gradients)
