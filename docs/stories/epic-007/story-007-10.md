# Story 007-10: Export to PDF format

**Epic:** EPIC-007 - File Operations and Interoperability
**Status:** Completed
**Estimate:** 8 points
**Assigned To:** Claude

---

## Description

As a pattern designer, I want to export patterns to PDF format so that I can print, plot, or share patterns as documents.

---

## Acceptance Criteria

- [ ] User can export to PDF via File → Export → PDF
- [ ] User can specify page size: A4, A3, A2, A1, A0, Letter, Tabloid, custom
- [ ] User can choose orientation: portrait or landscape
- [ ] Export can fit pattern to page or use exact scale (1:1, 1:2, custom)
- [ ] Multi-page export: large patterns split across pages with alignment marks
- [ ] User can choose what to include: pattern only, dimensions, annotations, grid
- [ ] PDF preserves vector quality (not rasterized)
- [ ] Export includes metadata: title, author, creation date, scale
- [ ] Export tested with Adobe Reader, plotting software

---

## Technical Notes

### Implementation Details

- Use QPdfWriter for PDF generation
- Render scene to QPainter on PDF
- Handle page sizes and orientations
- Implement multi-page splitting
- Add alignment marks for multi-page
- Set PDF metadata

### PDF Generation Process

1. Create QPdfWriter with target filename
2. Configure page size, orientation, margins
3. Create QPainter on QPdfWriter
4. Calculate scaling and tiling
5. Render pattern geometry
6. For multi-page: render each tile with alignment marks
7. Set PDF metadata
8. Finalize document

### Page Sizes

Support standard sizes:
- ISO A series: A0, A1, A2, A3, A4, A5
- US sizes: Letter, Legal, Tabloid
- Custom size: user specifies width x height

### Scaling Options

- **Fit to page**: Scale pattern to fit within page margins
- **Exact scale**: 1:1, 1:2, 1:4, 1:5, 1:10, custom ratio
- Display scale on PDF (e.g., "Scale: 1:2")

### Multi-Page Tiling

For patterns larger than page size:
- Divide pattern into tiles (pages)
- Add alignment marks at tile edges
- Include page number and grid position (e.g., "Page 3 of 6 (Row 2, Col 1)")
- Add overlap region for assembly (e.g., 10mm)

### Alignment Marks

For multi-page exports:
- Add corner marks for alignment
- Add edge marks for matching adjacent pages
- Include measurement rulers along edges

### Optional Elements

User can toggle:
- Pattern outline only (default)
- Seam allowances
- Notches and match points
- Dimension annotations
- Grid overlay
- Layer names and labels

### PDF Metadata

Set document properties:
- Title: pattern name
- Author: from preferences or user input
- Creator: "PatternCAD v{version}"
- Creation date: current date
- Subject: "Pattern for {project}"
- Keywords: layers, pattern names

---

## Dependencies

None

---

## Definition of Done

- [ ] Code implemented and follows project coding standards
- [ ] Unit tests written and passing for PDF generation
- [ ] Integration tests verify export with sample projects
- [ ] Manual testing completed on Linux and Windows
- [ ] Exported PDFs tested in Adobe Reader, plotting software
- [ ] All page sizes work correctly
- [ ] Both orientations work correctly
- [ ] Scaling options produce accurate results
- [ ] Multi-page tiling works with alignment marks
- [ ] Vector quality preserved (no rasterization)
- [ ] Metadata set correctly
- [ ] Optional elements toggle works
- [ ] Documentation updated (user guide, export formats)
- [ ] Code reviewed and approved
- [ ] Print tests verify accuracy
