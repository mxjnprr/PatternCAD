# Story 004-03: Add and manage match points

**Epic:** EPIC-004 - Professional Pattern Features
**Status:** Not Started
**Estimate:** 5 points
**Assigned To:** Unassigned

---

## Description

As a pattern designer, I want to add match points with labels
so that I can indicate where pieces should be aligned during assembly.

---

## Acceptance Criteria

- [ ] User can place match points on pattern edges
- [ ] Match points have labels (e.g., "A", "B", "1", "2")
- [ ] Match points snap to edges, curves, and vertices
- [ ] User can link match points between pieces to show relationships
- [ ] Match points are visually distinct (circle, cross, label)
- [ ] User can edit or delete match points
- [ ] Match points are saved and exported

---

## Technical Notes

**MatchPoint Class:**
```cpp
class MatchPoint {
    QString label;           // "A", "B", "1", "2", etc.
    Edge* edge;              // Edge match point is on (optional)
    Point2D position;        // Absolute or relative to edge
    std::vector<MatchPoint*> linkedPoints;  // Connected match points

    void linkTo(MatchPoint* other) {
        linkedPoints.push_back(other);
        other->linkedPoints.push_back(this);
    }

    void render(QPainter& painter) {
        // Draw circle with cross
        painter.drawEllipse(position, 4, 4);
        painter.drawLine(position - QPointF(4, 0),
                        position + QPointF(4, 0));
        painter.drawLine(position - QPointF(0, 4),
                        position + QPointF(0, 4));

        // Draw label
        QFont font;
        font.setBold(true);
        font.setPointSize(10);
        painter.setFont(font);
        painter.drawText(position + QPointF(6, -6), label);

        // Draw connection lines to linked points
        for (MatchPoint* linked : linkedPoints) {
            painter.setPen(QPen(Qt::DashLine));
            painter.drawLine(position, linked->position);
        }
    }
};
```

**MatchPointTool:**
- Activate from toolbar
- Click on edge or vertex to place match point
- Dialog appears to enter label
- Auto-suggest next label (if last was "A", suggest "B")
- Right-click existing match point to:
  - Edit label
  - Link to another match point (select second point)
  - Delete

**Linking:**
- Select first match point → Right-click → "Link to..."
- Click second match point to create link
- Linked points shown with dashed line connecting them
- Used to show which points on different pieces should align

---

## Dependencies

None (standalone feature)

---

## Definition of Done

- [ ] MatchPoint class implemented
- [ ] Match point rendering with labels
- [ ] MatchPointTool implemented
- [ ] Snap-to-edge/vertex working
- [ ] Linking functionality working
- [ ] Match point editing (label, position, delete)
- [ ] Match points saved/loaded
- [ ] Export working
- [ ] Unit tests
- [ ] Integration tests with UI
- [ ] Documentation updated
- [ ] Merged to main branch
