# Story 001-07: Delete objects with Delete key or menu

**Epic:** EPIC-001 - Core Drawing and Editing Tools
**Status:** Not Started
**Estimate:** 3 points
**Assigned To:** Unassigned

---

## Description

As a pattern designer, I want to delete selected objects
so that I can remove unwanted elements from my pattern.

---

## Acceptance Criteria

- [ ] User can delete selected objects with Delete or Backspace key
- [ ] User can delete via Edit menu â†’ Delete
- [ ] Deletion shows confirmation dialog if deleting many objects (>10)
- [ ] Delete operation is undoable (objects can be restored with Ctrl+Z)
- [ ] Deleting objects updates layer object count display
- [ ] Dependencies are handled gracefully:
  - Constraints referencing deleted objects are removed or marked invalid
  - Parameters referencing deleted geometry show warning
- [ ] Deleted objects are removed from canvas immediately
- [ ] Selection is cleared after deletion

---

## Technical Notes

- Implement DeleteObjectsCommand for undo/redo
- Store deleted objects in command for undo restoration
- Handle dependency cleanup:
  - Remove constraints involving deleted objects
  - Update parameter dependencies
  - Notify affected systems (parametric engine, constraint solver)
- Implement confirmation dialog for bulk delete (QMessageBox)
- Remove objects from layer and scene:
  ```cpp
  layer->removeObject(object);
  scene->removeItem(object->graphicsItem());
  ```
- Don't actually delete objects until undo history is cleared (keep for undo)
- Use smart pointers to manage object lifecycle

**Confirmation Dialog:**
```
"Delete 15 objects?"
This action can be undone.
[Cancel] [Delete]
```

---

## Dependencies

- story-001-03: Selection system
- story-008-08: Undo/redo system
- Layer system (story-008-09)

---

## Definition of Done

- [ ] Code implemented and peer reviewed
- [ ] Delete via keyboard and menu working
- [ ] Confirmation dialog for bulk delete
- [ ] Undo/redo working (objects restored)
- [ ] Dependencies cleaned up properly
- [ ] Layer counts updated
- [ ] Unit tests for delete command
- [ ] Integration tests for deletion
- [ ] Documentation updated
- [ ] Merged to main branch
