# Story 004-02: Add and manage notches

**Epic:** EPIC-004 - Professional Pattern Features
**Status:** Not Started
**Estimate:** 5 points
**Assigned To:** Unassigned

---

## Description

As a pattern designer, I want to add notches to pattern edges
so that I can mark assembly points and alignment guides.

---

## Acceptance Criteria

- [ ] User can place notches on pattern edges (click to place)
- [ ] Notch styles available: V-notch, slit, dot
- [ ] Notches snap to edges and curves
- [ ] Notch depth and style are configurable
- [ ] User can edit, move, or delete notches
- [ ] Notches are saved with pattern
- [ ] Notches export correctly to DXF, SVG, PDF

---

## Technical Notes

**Notch Class:**
```cpp
enum NotchStyle {
    VNotch,      // V-shaped cut (default)
    Slit,        // Straight cut perpendicular to edge
    Dot          // Small circle (marking only, not cut)
};

class Notch {
    Edge* edge;              // Edge notch is placed on
    double position;         // Position along edge (0-1 parametric)
    NotchStyle style;
    double depth;            // Depth in mm (default: 5mm)

    Point2D getLocation() {
        return edge->pointAt(position);
    }

    Vector2D getNormal() {
        // Get normal direction perpendicular to edge
        return edge->normalAt(position);
    }

    void render(QPainter& painter) {
        Point2D loc = getLocation();
        Vector2D normal = getNormal();

        switch (style) {
            case VNotch:
                // Draw V shape
                renderVNotch(painter, loc, normal, depth);
                break;
            case Slit:
                // Draw straight line
                renderSlit(painter, loc, normal, depth);
                break;
            case Dot:
                // Draw circle
                painter.drawEllipse(loc, 2, 2);
                break;
        }
    }
};
```

**NotchTool:**
- Activate notch tool from toolbar
- Click on edge to place notch
- Snap to nearest edge point
- Show notch preview while hovering
- Right-click existing notch to edit properties or delete

**Properties:**
- Notch properties panel:
  - Style dropdown (V-notch, Slit, Dot)
  - Depth input (mm)
  - Position along edge (percentage or distance)

---

## Dependencies

None (standalone feature)

---

## Definition of Done

- [ ] Notch class implemented
- [ ] All notch styles rendering correctly
- [ ] NotchTool implemented
- [ ] Snap-to-edge working
- [ ] Notch editing (move, delete, change properties)
- [ ] Notches saved/loaded with pattern
- [ ] Export to DXF, SVG, PDF working
- [ ] Unit tests for notch placement
- [ ] Integration tests with UI
- [ ] Documentation updated
- [ ] Merged to main branch
