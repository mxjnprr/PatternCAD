# Story 007-11: Recent files list

**Epic:** EPIC-007 - File Operations and Interoperability
**Status:** Completed
**Estimate:** 2 points
**Assigned To:** Claude

---

## Description

As a pattern designer, I want quick access to recently opened files so that I can easily return to current projects.

---

## Acceptance Criteria

- [x] Application maintains list of last 10-20 opened files
- [x] Recent files accessible from File → Recent Files menu
- [x] Menu shows filename and full path
- [x] Clicking recent file opens it
- [x] Non-existent files are removed from list gracefully (with error message)
- [x] Recent files list persists across application restarts

---

## Technical Notes

### Implementation Details

- Store recent files in QSettings
- Update list on file open/save
- Check file existence before opening
- Add to File menu dynamically
- Limit list to N entries (FIFO)

### QSettings Storage

Store recent files as:
```cpp
QSettings settings;
settings.setValue("recentFiles", recentFilesList);
```

Read on startup:
```cpp
QStringList recentFiles = settings.value("recentFiles").toStringList();
```

### Menu Integration

Dynamically populate File → Recent Files submenu:
- Create QAction for each recent file
- Show filename in menu text
- Set tooltip to full path
- Connect action to open file handler

### List Management

- Add file to list when opened or saved
- Move file to top if already in list (most recent first)
- Limit list to configurable size (default: 10, max: 20)
- Remove oldest entry when limit exceeded (FIFO)

### File Existence Check

Before opening:
- Check if file exists using QFile::exists()
- If not found, show error: "File not found: {path}"
- Remove non-existent file from list
- Update QSettings

### UI Design

Recent Files submenu should show:
```
File
  ├─ New
  ├─ Open...
  ├─ Save
  ├─ Save As...
  ├─ Recent Files  ▶
  │   ├─ mypattern.patterncad
  │   ├─ shirt-design.patterncad
  │   ├─ pants-v2.patterncad
  │   ├─ ───────────────────
  │   └─ Clear Recent Files
  ├─ ───────────────
  └─ Exit
```

### Clear Recent Files

Add menu action to clear recent files list:
- "Clear Recent Files" at bottom of submenu
- Clears list from QSettings
- Updates menu immediately

---

## Dependencies

- story-007-03 (Load project from native format)

---

## Definition of Done

- [x] Code implemented and follows project coding standards
- [x] Unit tests written and passing
- [x] Integration tests verify recent files functionality
- [x] Manual testing completed on Linux and Windows
- [x] Recent files list persists across restarts
- [x] File existence checking works correctly
- [x] Menu updates dynamically
- [x] FIFO list management works
- [x] Clear recent files works
- [x] Tooltips show full paths
- [ ] Documentation updated (user guide)
- [x] Code reviewed and approved
- [x] Edge cases tested (empty list, max entries, missing files)
