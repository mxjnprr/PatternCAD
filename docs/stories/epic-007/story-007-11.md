# Story 007-11: Recent files list

**Epic:** EPIC-007 - File Operations and Interoperability
**Status:** Not Started
**Estimate:** 2 points
**Assigned To:** Unassigned

---

## Description

As a pattern designer, I want quick access to recently opened files so that I can easily return to current projects.

---

## Acceptance Criteria

- [ ] Application maintains list of last 10-20 opened files
- [ ] Recent files accessible from File → Recent Files menu
- [ ] Menu shows filename and full path
- [ ] Clicking recent file opens it
- [ ] Non-existent files are removed from list gracefully (with error message)
- [ ] Recent files list persists across application restarts

---

## Technical Notes

### Implementation Details

- Store recent files in QSettings
- Update list on file open/save
- Check file existence before opening
- Add to File menu dynamically
- Limit list to N entries (FIFO)

### QSettings Storage

Store recent files as:
```cpp
QSettings settings;
settings.setValue("recentFiles", recentFilesList);
```

Read on startup:
```cpp
QStringList recentFiles = settings.value("recentFiles").toStringList();
```

### Menu Integration

Dynamically populate File → Recent Files submenu:
- Create QAction for each recent file
- Show filename in menu text
- Set tooltip to full path
- Connect action to open file handler

### List Management

- Add file to list when opened or saved
- Move file to top if already in list (most recent first)
- Limit list to configurable size (default: 10, max: 20)
- Remove oldest entry when limit exceeded (FIFO)

### File Existence Check

Before opening:
- Check if file exists using QFile::exists()
- If not found, show error: "File not found: {path}"
- Remove non-existent file from list
- Update QSettings

### UI Design

Recent Files submenu should show:
```
File
  ├─ New
  ├─ Open...
  ├─ Save
  ├─ Save As...
  ├─ Recent Files  ▶
  │   ├─ mypattern.patterncad
  │   ├─ shirt-design.patterncad
  │   ├─ pants-v2.patterncad
  │   ├─ ───────────────────
  │   └─ Clear Recent Files
  ├─ ───────────────
  └─ Exit
```

### Clear Recent Files

Add menu action to clear recent files list:
- "Clear Recent Files" at bottom of submenu
- Clears list from QSettings
- Updates menu immediately

---

## Dependencies

- story-007-03 (Load project from native format)

---

## Definition of Done

- [ ] Code implemented and follows project coding standards
- [ ] Unit tests written and passing
- [ ] Integration tests verify recent files functionality
- [ ] Manual testing completed on Linux and Windows
- [ ] Recent files list persists across restarts
- [ ] File existence checking works correctly
- [ ] Menu updates dynamically
- [ ] FIFO list management works
- [ ] Clear recent files works
- [ ] Tooltips show full paths
- [ ] Documentation updated (user guide)
- [ ] Code reviewed and approved
- [ ] Edge cases tested (empty list, max entries, missing files)
